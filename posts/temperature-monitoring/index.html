<!doctype html><html lang=en xmlns=http://www.w3.org/1999/xhtml><head><meta charset=UTF-8><meta content="...just stuff I thought I should write down and that might be useful to others..." name=description><meta content="width=device-width,initial-scale=1" name=viewport><meta content=#ff7800 name=theme-color><meta content=#ffa348 media=(prefers-color-scheme:dark) name=theme-color><title>Cost Effective Temperature Monitoring - Karl's Little World</title><link href=https://karldyson.github.io/karld-blog-website/posts/temperature-monitoring/ rel=canonical><link href=https://mastodon.social/@karldyson rel=me><meta content=@karldyson@mastodon.social name=fediverse:creator><link href=https://karldyson.github.io/karld-blog-website/favicon.png rel=icon type=image/png><link href=https://karldyson.github.io/karld-blog-website/apple-touch-icon.png rel=apple-touch-icon sizes=180x180 type=image/png><link title="Karl's Little World - Atom Feed" href=https://karldyson.github.io/karld-blog-website/atom.xml rel=alternate type=application/atom+xml><link title="Karl's Little World - RSS Feed" href=https://karldyson.github.io/karld-blog-website/rss.xml rel=alternate type=application/rss+xml><style>:root{--accent-color:#ff7800}[data-theme=dark]{--accent-color:#ffa348}@media (prefers-color-scheme:dark){:root:not([data-theme=light]){--accent-color:#ffa348}}</style><link href=https://karldyson.github.io/karld-blog-website/style.css rel=stylesheet><link media="(prefers-color-scheme: light)" href=https://karldyson.github.io/karld-blog-website/syntax-theme-light.css rel=stylesheet><link media="(prefers-color-scheme: dark)" href=https://karldyson.github.io/karld-blog-website/syntax-theme-dark.css rel=stylesheet><script defer src=https://karldyson.github.io/karld-blog-website/closable.js></script><script data-goatcounter=https://junesta.goatcounter.com/count defer src=https://karldyson.github.io/karld-blog-website/count.js></script><script defer src=https://karldyson.github.io/karld-blog-website/fuse.js></script><script defer src=https://karldyson.github.io/karld-blog-website/search-fuse.js></script><script defer src=https://karldyson.github.io/karld-blog-website/theme-switcher.js></script><meta content="Karl's Little World" property=og:site_name><meta content="Cost Effective Temperature Monitoring - Karl's Little World" property=og:title><meta content=https://karldyson.github.io/karld-blog-website/posts/temperature-monitoring/ property=og:url><meta content="Temperature monitoring with DS18B20 1-wire bus sensors and a raspberry pi" property=og:description><meta content=https://karldyson.github.io/karld-blog-website/card.png property=og:image><meta content=en_US property=og:locale><body><header id=site-nav><nav><a href=#main-content tabindex=0> Skip to Main Content </a><ul><li id=home><a href=https://karldyson.github.io/karld-blog-website> <i class=icon></i>Karl's Little World</a><li class=divider><li><a href=https://karldyson.github.io/karld-blog-website/about/>About</a><li><a href=https://karldyson.github.io/karld-blog-website/posts/>Posts</a><li id=search><button class=circle id=search-toggle title=Search><i class=icon></i></button><li id=theme-switcher><details class=closable><summary class=circle title=Theme><i class=icon></i></summary> <ul><li><button title="Switch to Light Theme" class=circle id=theme-light><i class=icon></i></button><li><button title="Switch to Dark Theme" class=circle id=theme-dark><i class=icon></i></button><li><button title="Use System Theme" class=circle id=theme-system><i class=icon></i></button></ul></details><li id=feed><details class=closable><summary class=circle title=Feed><i class=icon></i></summary> <ul><li><a href=https://karldyson.github.io/karld-blog-website/atom.xml>Atom</a><li><a href=https://karldyson.github.io/karld-blog-website/rss.xml>RSS</a></ul></details><li id=repo><a class=circle href=https://github.com/karldyson/karld-blog-website title=Repository> <i class=icon></i> </a></ul></nav><div id=search-container><label class=visually-hidden for=search-bar>Search</label><input placeholder="Search for…" autocomplete=off disabled id=search-bar type=search><div id=search-results-container><div id=search-results></div></div></div></header><main id=main-content><article><div id=heading><p><small> <time datetime=" 2012-08-20T00:00:00+00:00">Published on August 20, 2012</time><span> • </span> <time datetime=" 2017-10-23T00:00:00+00:00">Updated on October 23, 2017</time></small><h1>Cost Effective Temperature Monitoring</h1><p><small><span>4 minutes read</span><span> • </span></small><ul class=tags><li><a class=tag href=https://karldyson.github.io/karld-blog-website/tags/linux/>linux</a><li><a class=tag href=https://karldyson.github.io/karld-blog-website/tags/temperature/>temperature</a><li><a class=tag href=https://karldyson.github.io/karld-blog-website/tags/owfs/>owfs</a><li><a class=tag href=https://karldyson.github.io/karld-blog-website/tags/one-wire/>one-wire</a><li><a class=tag href=https://karldyson.github.io/karld-blog-website/tags/monitoring/>monitoring</a><li><a class=tag href=https://karldyson.github.io/karld-blog-website/tags/raspberry-pi/>raspberry-pi</a><li><a class=tag href=https://karldyson.github.io/karld-blog-website/tags/perl/>perl</a><li><a class=tag href=https://karldyson.github.io/karld-blog-website/tags/munin/>munin</a></ul></div><div id=buttons-container><details class=closable id=backlinks><summary title=Backlinks><i class=icon></i></summary> <div><strong class=title>Backlinks</strong><div><ul><li><a href=https://karldyson.github.io/karld-blog-website/posts/stratum-zero-ntp-server/>Stratum Zero NTP Server</a></ul></div></div></details><a title="Go to Top" href=#top id=go-to-top><i class=icon></i></a><a href="https://shareopenly.org/share/?url=https://karldyson.github.io/karld-blog-website/posts/temperature-monitoring/&text=Temperature%20monitoring%20with%20DS18B20%201-wire%20bus%20sensors%20and%20a%20raspberry%20pi" id=share title=Share><i class=icon></i></a><a title="File an Issue" href=https://github.com/karldyson/karld-blog-website/issues id=issue><i class=icon></i></a></div><figure><img src=temperature-graph.png><figcaption>Temperature Graph produced by Munin</figcaption></figure><p>I’d been thinking about some temperature monitoring at home for a while, particularly in the nursery, so I can see if it’s getting too hot or cold in there while I’m asleep.<p>When my Raspberry Pi arrived, I decided to put it to work.<p>After quite a bit of googling & reading, I found that the one wire file system stuff was easy to install, and had been done by others (See references below).<p>Whilst it’s possible to go and buy the individual components, and I’m quite capable with a soldering iron, I have to admit to taking the lazy route and purchased some bits from <a href=http://sheepwalkelectronics.co.uk/>Sheepwalk Electronics</a><p>I wanted to monitor temperature in the garage, outside, the loft, the front bedroom, and the small bedroom on the back of the house (currently, the nursery).<p>I also monitor temperature in the lounge, but that comes from the Current Cost unit that I also monitor electricity usage with.<p>So, I’d need a host adaptor, and a sensor for each of the places to be monitored.<p>The Sheepwalk sensor modules are made up, or kit form, and include RJ45 sockets to ease putting together a network with standard cat5 cable. The sensors can either be parasitic and pull power from the bus, or can have power supplied. I’ve set mine up as parasitic, and it’s working OK so far.<p>One wire is best suited to a linear network of devices strung together, but seems quite robust, and is working in a star arrangement.<p>I purchased Sheepwalk’s SWE2+SWE0 pack which comes with an SWE2 (basically, a sensor plus 6 RJ45 sockets) and four SWE0 (a basic sensor on the end of 2m of cat5). I also purchased a USB host adaptor, and the RJ11 to RJ45 cable, although this would be simple to make up. Lastly, I picked up some RJ45 couplers, as they’re a good price and I’d be sure to need some!<p>I installed <a href=http://www.raspberrypi.org/downloads>Raspbian</a> (the official/recommended linux distro for the Raspberry Pi) on the SD card and booted the Raspberry. I gave it a static IP on my network so I could probe it from the Munin instance later on without fear of the IP changing.<p>After inserting the USB adaptor, I installed OWFS<pre class=z-code><code><span class="z-text z-plain">kdyson@rpi1 ~ $ apt-get install owfs
</span></code></pre><p>There’s no init script for owfs itself, only for the supporting services, but <a href=http://neilbaldwin.net/blog/weather/raspberry-pi-data-logger/>Neil Baldwin’s page</a> that I’d been reading had one, which saved me the hassle of writing one.<p>With that started, I plugged in the RJ11 to RJ45 lead, and plugged the SWE2 into the end.<p>A fresh <code>ls -al /mnt/1wire/</code> showed the new sensor, and<pre class=z-code><code><span class="z-text z-plain">kdyson@rpi1 ~ $ cat /mnt/1wire/28.873AC4030000/temperature
</span><span class="z-text z-plain">31.5625
</span><span class="z-text z-plain">kdyson@rpi1 ~ $
</span></code></pre><p>I tested the rest of the sensors, before hooking them up where I wanted them. I was a little concerned that the cable length might be a problem to the furthest sensor - the sensor in the loft is about 25m of cable from the SWE2, and is strung off the SWE1 that provides the “Front Bedroom” sensor.<p>Lastly, I hacked up a munin plugin. All I needed was the <code>munin-node</code> package (<code>apt-get install munin-node</code>) as my remote <code>munin</code> instance would be collecting the data and producing the graphs (it’s already doing things like the already mentioned temperature in the lounge, electricity usage, and more mundane things like the SNR & sync rate of my ADSL line from my router).<p>So, in summary:<ul><li>Raspberry Pi + SD Card + Raspbian + OWFS + Munin-Node <ul><li>USB Host Adaptor + RJ11 to RJ45 Lead <ul><li>SWE2 (Garage) <ul><li>SWE0 (Garage Outside)<li>SWE1 (Front Bedroom) <ul><li>SWE0 (Loft)</ul><li>SWE0 (Small Bedroom)</ul></ul></ul></ul><h1 id=code-snippets>Code Snippets</h1><p>First up is the munin plugin. I took a chunk of inspiration from <a href=http://err.no/personal/blog/2010/Nov/02>http://err.no/personal/blog/2010/Nov/02</a> but the perl OWNet module was playing up for me, and given it was 10pm, I took the lazy route and hacked it about to just look around the file system. You can tell how lazy I was, because you can see I used <code>glob()</code> instead of <code>opendir()</code> etc. I’m not proud of it, but it’s working.<p>You’d need to drop this either directly in <code>/etc/munin/plugins</code> or someplace else and symlink it to there. I did the latter.<pre class="language-perl z-code" data-lang=perl><code class=language-perl data-lang=perl><span class="z-source z-perl"><span class="z-meta z-comment z-perl"><span class="z-comment z-line z-number-sign z-perl"><span class="z-punctuation z-definition z-comment z-perl">#</span>!/usr/bin/perl
</span></span></span><span class="z-source z-perl">
</span><span class="z-source z-perl"><span class="z-meta z-comment z-perl"><span class="z-comment z-line z-number-sign z-perl"><span class="z-punctuation z-definition z-comment z-perl">#</span>%# family=auto
</span></span></span><span class="z-source z-perl"><span class="z-meta z-comment z-perl"><span class="z-comment z-line z-number-sign z-perl"><span class="z-punctuation z-definition z-comment z-perl">#</span>%# capabilities=autoconf
</span></span></span><span class="z-source z-perl">
</span><span class="z-source z-perl"><span class="z-meta z-preprocessor z-use z-perl"><span class="z-keyword z-control z-import z-use z-perl">use</span> <span class="z-entity z-name z-namespace z-perl">strict</span></span><span class="z-punctuation z-terminator z-statement z-perl">;</span>
</span><span class="z-source z-perl"><span class="z-meta z-preprocessor z-use z-perl"><span class="z-keyword z-control z-import z-use z-perl">use</span> <span class="z-entity z-name z-namespace z-perl">warnings</span></span><span class="z-punctuation z-terminator z-statement z-perl">;</span>
</span><span class="z-source z-perl"><span class="z-meta z-preprocessor z-use z-perl"><span class="z-keyword z-control z-import z-use z-perl">use</span> <span class="z-entity z-name z-namespace z-perl">utf8</span></span><span class="z-punctuation z-terminator z-statement z-perl">;</span>
</span><span class="z-source z-perl">
</span><span class="z-source z-perl"><span class="z-storage z-type z-variable z-perl">my</span> <span class="z-variable z-other z-readwrite z-perl"><span class="z-punctuation z-definition z-variable z-perl">$</span>debug</span> <span class="z-keyword z-operator z-assignment z-perl">=</span> <span class="z-constant z-numeric z-integer z-decimal z-perl">0</span><span class="z-punctuation z-terminator z-statement z-perl">;</span>
</span><span class="z-source z-perl">
</span><span class="z-source z-perl"><span class="z-meta z-function-call z-perl"><span class="z-support z-function z-perl">chdir</span></span> <span class="z-meta z-string z-perl"><span class="z-string z-quoted z-double z-perl"><span class="z-punctuation z-definition z-string z-begin z-perl">"</span>/mnt/1wire/bus.0<span class="z-punctuation z-definition z-string z-end z-perl">"</span></span></span><span class="z-punctuation z-terminator z-statement z-perl">;</span>
</span><span class="z-source z-perl">
</span><span class="z-source z-perl"><span class="z-storage z-type z-variable z-perl">my</span> <span class="z-variable z-other z-readwrite z-perl"><span class="z-punctuation z-definition z-variable z-perl">@</span>buses</span> <span class="z-keyword z-operator z-assignment z-perl">=</span> <span class="z-meta z-function-call z-perl"><span class="z-support z-function z-perl">grep</span></span> <span class="z-punctuation z-section z-block z-begin z-perl">{</span> <span class="z-punctuation z-section z-generic z-begin z-perl">/</span><span class="z-meta z-string z-perl"><span class="z-string z-regexp z-perl"><span class="z-source z-regexp"><span class="z-meta z-literal z-regexp">b</span><span class="z-meta z-literal z-regexp">u</span><span class="z-meta z-literal z-regexp">s</span><span class="z-keyword z-other z-any z-regexp">.</span></span></span></span><span class="z-punctuation z-section z-generic z-end z-perl">/</span> <span class="z-punctuation z-section z-block z-end z-perl">}</span> <span class="z-meta z-function-call z-perl"><span class="z-support z-function z-perl">glob</span></span><span class="z-punctuation z-section z-group z-begin z-perl">(</span><span class="z-meta z-string z-perl"><span class="z-string z-quoted z-double z-perl"><span class="z-punctuation z-definition z-string z-begin z-perl">"</span>*<span class="z-punctuation z-definition z-string z-end z-perl">"</span></span></span><span class="z-punctuation z-section z-group z-end z-perl">)</span><span class="z-punctuation z-terminator z-statement z-perl">;</span>
</span><span class="z-source z-perl">
</span><span class="z-source z-perl"><span class="z-meta z-function-call z-perl"><span class="z-support z-function z-perl">print</span></span> <span class="z-meta z-string z-perl"><span class="z-string z-quoted z-double z-perl"><span class="z-punctuation z-definition z-string z-begin z-perl">"</span>got buses <span class="z-punctuation z-definition z-string z-end z-perl">"</span></span></span><span class="z-keyword z-operator z-concat z-perl">.</span><span class="z-meta z-function-call z-perl"><span class="z-support z-function z-perl">join</span></span><span class="z-punctuation z-section z-group z-begin z-perl">(</span><span class="z-meta z-string z-perl"><span class="z-string z-quoted z-double z-perl"><span class="z-punctuation z-definition z-string z-begin z-perl">"</span>, <span class="z-punctuation z-definition z-string z-end z-perl">"</span></span></span><span class="z-punctuation z-separator z-sequence z-perl">,</span> <span class="z-variable z-other z-readwrite z-perl"><span class="z-punctuation z-definition z-variable z-perl">@</span>buses</span><span class="z-punctuation z-section z-group z-end z-perl">)</span><span class="z-keyword z-operator z-concat z-perl">.</span><span class="z-meta z-string z-perl"><span class="z-string z-quoted z-double z-perl"><span class="z-punctuation z-definition z-string z-begin z-perl">"</span><span class="z-constant z-character z-escape z-perl">\n</span><span class="z-punctuation z-definition z-string z-end z-perl">"</span></span></span> <span class="z-keyword z-control z-conditional z-if z-perl">if</span> <span class="z-variable z-other z-readwrite z-perl"><span class="z-punctuation z-definition z-variable z-perl">$</span>debug</span><span class="z-punctuation z-terminator z-statement z-perl">;</span>
</span><span class="z-source z-perl">
</span><span class="z-source z-perl"><span class="z-storage z-type z-variable z-perl">my</span> <span class="z-variable z-other z-readwrite z-perl"><span class="z-punctuation z-definition z-variable z-perl">%</span>sensors</span><span class="z-punctuation z-terminator z-statement z-perl">;</span>
</span><span class="z-source z-perl"><span class="z-storage z-type z-variable z-perl">my</span> <span class="z-variable z-other z-readwrite z-perl"><span class="z-punctuation z-definition z-variable z-perl">%</span>sensor_names</span><span class="z-punctuation z-terminator z-statement z-perl">;</span>
</span><span class="z-source z-perl"><span class="z-keyword z-control z-loop z-for z-perl">for</span> <span class="z-storage z-type z-variable z-perl">my</span> <span class="z-variable z-other z-readwrite z-perl"><span class="z-punctuation z-definition z-variable z-perl">$</span>bus</span> <span class="z-punctuation z-section z-group z-begin z-perl">(</span><span class="z-variable z-other z-readwrite z-perl"><span class="z-punctuation z-definition z-variable z-perl">@</span>buses</span><span class="z-punctuation z-section z-group z-end z-perl">)</span> <span class="z-punctuation z-section z-block z-begin z-perl">{</span>
</span><span class="z-source z-perl">  <span class="z-keyword z-control z-loop z-for z-perl">for</span> <span class="z-storage z-type z-variable z-perl">my</span> <span class="z-variable z-other z-readwrite z-perl"><span class="z-punctuation z-definition z-variable z-perl">$</span>sensor</span> <span class="z-punctuation z-section z-group z-begin z-perl">(</span><span class="z-meta z-function-call z-perl"><span class="z-support z-function z-perl">glob</span></span><span class="z-punctuation z-section z-group z-begin z-perl">(</span><span class="z-variable z-other z-readwrite z-perl"><span class="z-punctuation z-definition z-variable z-perl">$</span>bus</span><span class="z-keyword z-operator z-concat z-perl">.</span><span class="z-meta z-string z-perl"><span class="z-string z-quoted z-double z-perl"><span class="z-punctuation z-definition z-string z-begin z-perl">"</span>/*<span class="z-punctuation z-definition z-string z-end z-perl">"</span></span></span><span class="z-punctuation z-section z-group z-end z-perl">)</span><span class="z-punctuation z-section z-group z-end z-perl">)</span> <span class="z-punctuation z-section z-block z-begin z-perl">{</span>
</span><span class="z-source z-perl">    <span class="z-meta z-function-call z-perl"><span class="z-support z-function z-perl">print</span></span> <span class="z-meta z-string z-perl"><span class="z-string z-quoted z-double z-perl"><span class="z-punctuation z-definition z-string z-begin z-perl">"</span>got sensor </span><span class="z-meta z-interpolation z-perl"><span class="z-variable z-other z-readwrite z-perl"><span class="z-punctuation z-definition z-variable z-perl">$</span>sensor</span></span><span class="z-string z-quoted z-double z-perl"><span class="z-constant z-character z-escape z-perl">\n</span><span class="z-punctuation z-definition z-string z-end z-perl">"</span></span></span> <span class="z-keyword z-control z-conditional z-if z-perl">if</span> <span class="z-variable z-other z-readwrite z-perl"><span class="z-punctuation z-definition z-variable z-perl">$</span>debug</span><span class="z-punctuation z-terminator z-statement z-perl">;</span>
</span><span class="z-source z-perl">    <span class="z-storage z-type z-variable z-perl">my</span> <span class="z-variable z-other z-readwrite z-perl"><span class="z-punctuation z-definition z-variable z-perl">$</span>p</span> <span class="z-keyword z-operator z-assignment z-perl">=</span> <span class="z-variable z-other z-readwrite z-perl"><span class="z-punctuation z-definition z-variable z-perl">$</span>sensor</span><span class="z-punctuation z-terminator z-statement z-perl">;</span>
</span><span class="z-source z-perl">    <span class="z-variable z-other z-readwrite z-perl"><span class="z-punctuation z-definition z-variable z-perl">$</span>sensor</span> <span class="z-keyword z-operator z-binary z-perl">=~</span> <span class="z-meta z-function-call z-perl"><span class="z-support z-function z-perl">s</span><span class="z-punctuation z-section z-generic z-begin z-perl">|</span><span class="z-meta z-string z-perl"><span class="z-string z-regexp z-perl"><span class="z-source z-regexp"><span class="z-keyword z-control z-anchors z-regexp">^</span><span class="z-meta z-literal z-regexp">b</span><span class="z-meta z-literal z-regexp">u</span><span class="z-meta z-literal z-regexp">s</span><span class="z-keyword z-other z-any z-regexp">.</span><span class="z-keyword z-control z-character-class z-regexp">\d</span><span class="z-keyword z-operator z-quantifier z-regexp">+</span><span class="z-meta z-literal z-regexp">/</span></span></span></span><span class="z-punctuation z-separator z-sequence z-perl">|</span><span class="z-meta z-string z-perl"></span><span class="z-punctuation z-section z-generic z-end z-perl">|</span></span><span class="z-punctuation z-terminator z-statement z-perl">;</span>
</span><span class="z-source z-perl">    <span class="z-storage z-type z-variable z-perl">my</span> <span class="z-variable z-other z-readwrite z-perl"><span class="z-punctuation z-definition z-variable z-perl">$</span>sensor_name</span> <span class="z-keyword z-operator z-assignment z-perl">=</span> <span class="z-variable z-other z-readwrite z-perl"><span class="z-punctuation z-definition z-variable z-perl">$</span>sensor</span><span class="z-punctuation z-terminator z-statement z-perl">;</span>
</span><span class="z-source z-perl">    <span class="z-variable z-other z-readwrite z-perl"><span class="z-punctuation z-definition z-variable z-perl">$</span>sensor_name</span> <span class="z-keyword z-operator z-binary z-perl">=~</span> <span class="z-meta z-function-call z-perl"><span class="z-support z-function z-perl">s</span><span class="z-punctuation z-section z-generic z-begin z-perl">|</span><span class="z-meta z-string z-perl"><span class="z-string z-regexp z-perl"><span class="z-source z-regexp"><span class="z-constant z-character z-escape z-regexp">\.</span></span></span></span><span class="z-punctuation z-separator z-sequence z-perl">|</span><span class="z-meta z-string z-perl"></span><span class="z-punctuation z-section z-generic z-end z-perl">|</span></span><span class="z-punctuation z-terminator z-statement z-perl">;</span>
</span><span class="z-source z-perl">    <span class="z-keyword z-control z-flow z-next z-perl">next</span> <span class="z-keyword z-control z-conditional z-if z-perl">if</span> <span class="z-variable z-other z-readwrite z-perl"><span class="z-punctuation z-definition z-variable z-perl">$</span>sensor</span> <span class="z-keyword z-operator z-binary z-perl">=~</span> <span class="z-punctuation z-section z-generic z-begin z-perl">/</span><span class="z-meta z-string z-perl"><span class="z-string z-regexp z-perl"><span class="z-source z-regexp"><span class="z-meta z-group z-regexp"><span class="z-keyword z-control z-group z-regexp">(</span></span><span class="z-meta z-group z-regexp"><span class="z-meta z-literal z-regexp">i</span><span class="z-meta z-literal z-regexp">n</span><span class="z-meta z-literal z-regexp">t</span><span class="z-meta z-literal z-regexp">e</span><span class="z-meta z-literal z-regexp">r</span><span class="z-meta z-literal z-regexp">f</span><span class="z-meta z-literal z-regexp">a</span><span class="z-meta z-literal z-regexp">c</span><span class="z-meta z-literal z-regexp">e</span><span class="z-keyword z-operator z-alternation z-regexp">|</span><span class="z-meta z-literal z-regexp">a</span><span class="z-meta z-literal z-regexp">l</span><span class="z-meta z-literal z-regexp">a</span><span class="z-meta z-literal z-regexp">r</span><span class="z-meta z-literal z-regexp">m</span><span class="z-keyword z-operator z-alternation z-regexp">|</span><span class="z-meta z-literal z-regexp">s</span><span class="z-meta z-literal z-regexp">i</span><span class="z-meta z-literal z-regexp">m</span><span class="z-meta z-literal z-regexp">u</span><span class="z-meta z-literal z-regexp">l</span><span class="z-meta z-literal z-regexp">t</span><span class="z-meta z-literal z-regexp">a</span><span class="z-meta z-literal z-regexp">n</span><span class="z-meta z-literal z-regexp">e</span><span class="z-meta z-literal z-regexp">o</span><span class="z-meta z-literal z-regexp">u</span><span class="z-meta z-literal z-regexp">s</span></span><span class="z-meta z-group z-regexp"><span class="z-keyword z-control z-group z-regexp">)</span></span></span></span></span><span class="z-punctuation z-section z-generic z-end z-perl">/</span><span class="z-punctuation z-terminator z-statement z-perl">;</span>
</span><span class="z-source z-perl">    <span class="z-keyword z-control z-flow z-next z-perl">next</span> <span class="z-keyword z-control z-conditional z-unless z-perl">unless</span> <span class="z-variable z-other z-readwrite z-perl"><span class="z-punctuation z-definition z-variable z-perl">$</span>sensor</span> <span class="z-keyword z-operator z-binary z-perl">=~</span> <span class="z-punctuation z-section z-generic z-begin z-perl">/</span><span class="z-meta z-string z-perl"><span class="z-string z-regexp z-perl"><span class="z-source z-regexp"><span class="z-keyword z-control z-anchors z-regexp">^</span><span class="z-meta z-literal z-regexp">2</span><span class="z-meta z-literal z-regexp">8</span><span class="z-constant z-character z-escape z-regexp">\.</span></span></span></span><span class="z-punctuation z-section z-generic z-end z-perl">/</span><span class="z-punctuation z-terminator z-statement z-perl">;</span>
</span><span class="z-source z-perl">    <span class="z-variable z-other z-readwrite z-perl"><span class="z-punctuation z-definition z-variable z-perl">$</span>sensors</span><span class="z-meta z-item-access z-perl"><span class="z-punctuation z-section z-item-access z-begin z-perl">{</span><span class="z-variable z-other z-readwrite z-perl"><span class="z-punctuation z-definition z-variable z-perl">$</span>sensor</span><span class="z-punctuation z-section z-item-access z-end z-perl">}</span></span> <span class="z-keyword z-operator z-assignment z-perl">=</span> <span class="z-variable z-other z-readwrite z-perl"><span class="z-punctuation z-definition z-variable z-perl">$</span>p</span><span class="z-punctuation z-terminator z-statement z-perl">;</span>
</span><span class="z-source z-perl">    <span class="z-variable z-other z-readwrite z-perl"><span class="z-punctuation z-definition z-variable z-perl">$</span>sensor_names</span><span class="z-meta z-item-access z-perl"><span class="z-punctuation z-section z-item-access z-begin z-perl">{</span><span class="z-variable z-other z-readwrite z-perl"><span class="z-punctuation z-definition z-variable z-perl">$</span>sensor</span><span class="z-punctuation z-section z-item-access z-end z-perl">}</span></span> <span class="z-keyword z-operator z-assignment z-perl">=</span> <span class="z-variable z-other z-readwrite z-perl"><span class="z-punctuation z-definition z-variable z-perl">$</span>sensor_name</span><span class="z-punctuation z-terminator z-statement z-perl">;</span>
</span><span class="z-source z-perl">  <span class="z-punctuation z-section z-block z-end z-perl">}</span>
</span><span class="z-source z-perl"><span class="z-punctuation z-section z-block z-end z-perl">}</span>
</span><span class="z-source z-perl">
</span><span class="z-source z-perl"><span class="z-storage z-type z-variable z-perl">my</span> <span class="z-variable z-other z-readwrite z-perl"><span class="z-punctuation z-definition z-variable z-perl">%</span>labels</span><span class="z-punctuation z-terminator z-statement z-perl">;</span>
</span><span class="z-source z-perl"><span class="z-keyword z-control z-conditional z-if z-perl">if</span><span class="z-punctuation z-section z-group z-begin z-perl">(</span><span class="z-meta z-function-call z-perl"><span class="z-support z-function z-perl">open</span></span><span class="z-punctuation z-section z-group z-begin z-perl">(</span><span class="z-constant z-other z-perl">A</span><span class="z-punctuation z-separator z-sequence z-perl">,</span> <span class="z-meta z-string z-perl"><span class="z-string z-quoted z-single z-perl"><span class="z-punctuation z-definition z-string z-begin z-perl">'</span>/etc/owfs-aliases<span class="z-punctuation z-definition z-string z-end z-perl">'</span></span></span><span class="z-punctuation z-section z-group z-end z-perl">)</span><span class="z-punctuation z-section z-group z-end z-perl">)</span> <span class="z-punctuation z-section z-block z-begin z-perl">{</span>
</span><span class="z-source z-perl">  <span class="z-keyword z-control z-loop z-while z-perl">while</span><span class="z-punctuation z-section z-group z-begin z-perl">(</span><span class="z-meta z-string z-perl"><span class="z-string z-quoted z-angle z-perl"><span class="z-punctuation z-definition z-string z-begin z-perl">&lt;</span>a<span class="z-punctuation z-definition z-string z-end z-perl">></span></span></span><span class="z-punctuation z-section z-group z-end z-perl">)</span> <span class="z-punctuation z-section z-block z-begin z-perl">{</span>
</span><span class="z-source z-perl">    <span class="z-meta z-function-call z-perl"><span class="z-support z-function z-perl">chomp</span></span><span class="z-punctuation z-terminator z-statement z-perl">;</span>
</span><span class="z-source z-perl">    <span class="z-meta z-function-call z-perl"><span class="z-support z-function z-perl">print</span></span> <span class="z-meta z-string z-perl"><span class="z-string z-quoted z-double z-perl"><span class="z-punctuation z-definition z-string z-begin z-perl">"</span>got label </span><span class="z-meta z-interpolation z-perl"><span class="z-variable z-language z-perl"><span class="z-punctuation z-definition z-variable z-perl">$</span>_</span></span><span class="z-string z-quoted z-double z-perl"><span class="z-constant z-character z-escape z-perl">\n</span><span class="z-punctuation z-definition z-string z-end z-perl">"</span></span></span> <span class="z-keyword z-control z-conditional z-if z-perl">if</span> <span class="z-variable z-other z-readwrite z-perl"><span class="z-punctuation z-definition z-variable z-perl">$</span>debug</span><span class="z-punctuation z-terminator z-statement z-perl">;</span>
</span><span class="z-source z-perl">    <span class="z-storage z-type z-variable z-perl">my</span><span class="z-punctuation z-section z-group z-begin z-perl">(</span><span class="z-variable z-other z-readwrite z-perl"><span class="z-punctuation z-definition z-variable z-perl">$</span>s</span><span class="z-punctuation z-separator z-sequence z-perl">,</span><span class="z-variable z-other z-readwrite z-perl"><span class="z-punctuation z-definition z-variable z-perl">$</span>l</span><span class="z-punctuation z-section z-group z-end z-perl">)</span> <span class="z-keyword z-operator z-assignment z-perl">=</span> <span class="z-meta z-function-call z-perl"><span class="z-support z-function z-perl">m</span><span class="z-punctuation z-section z-generic z-begin z-perl">/</span></span><span class="z-meta z-function-call z-perl"><span class="z-meta z-string z-perl"><span class="z-string z-regexp z-perl"><span class="z-source z-regexp"><span class="z-keyword z-control z-anchors z-regexp">^</span><span class="z-meta z-group z-regexp"><span class="z-keyword z-control z-group z-regexp">(</span></span><span class="z-meta z-group z-regexp"><span class="z-meta z-set z-regexp"><span class="z-keyword z-control z-set z-regexp">[</span><span class="z-keyword z-control z-character-class z-regexp">\d</span><span class="z-constant z-other z-range z-regexp">a</span><span class="z-constant z-other z-range z-regexp">-z</span><span class="z-constant z-other z-range z-regexp">A</span><span class="z-constant z-other z-range z-regexp">-Z</span><span class="z-constant z-character z-escape z-regexp">\.</span><span class="z-keyword z-control z-set z-regexp">]</span></span><span class="z-keyword z-operator z-quantifier z-regexp">+</span></span><span class="z-meta z-group z-regexp"><span class="z-keyword z-control z-group z-regexp">)</span></span><span class="z-keyword z-control z-character-class z-regexp">\s</span><span class="z-keyword z-operator z-quantifier z-regexp">*</span><span class="z-meta z-literal z-regexp">=</span><span class="z-keyword z-control z-character-class z-regexp">\s</span><span class="z-keyword z-operator z-quantifier z-regexp">*</span><span class="z-meta z-group z-regexp"><span class="z-keyword z-control z-group z-regexp">(</span></span><span class="z-meta z-group z-regexp"><span class="z-keyword z-other z-any z-regexp">.</span><span class="z-keyword z-operator z-quantifier z-regexp">+</span></span><span class="z-meta z-group z-regexp"><span class="z-keyword z-control z-group z-regexp">)</span></span><span class="z-keyword z-control z-anchors z-regexp">$</span></span></span></span></span><span class="z-meta z-function-call z-perl"><span class="z-punctuation z-section z-generic z-end z-perl">/</span></span><span class="z-punctuation z-terminator z-statement z-perl">;</span>
</span><span class="z-source z-perl">    <span class="z-variable z-other z-readwrite z-perl"><span class="z-punctuation z-definition z-variable z-perl">$</span>labels</span><span class="z-meta z-item-access z-perl"><span class="z-punctuation z-section z-item-access z-begin z-perl">{</span><span class="z-variable z-other z-readwrite z-perl"><span class="z-punctuation z-definition z-variable z-perl">$</span>s</span><span class="z-punctuation z-section z-item-access z-end z-perl">}</span></span> <span class="z-keyword z-operator z-assignment z-perl">=</span> <span class="z-variable z-other z-readwrite z-perl"><span class="z-punctuation z-definition z-variable z-perl">$</span>l</span><span class="z-punctuation z-terminator z-statement z-perl">;</span>
</span><span class="z-source z-perl">  <span class="z-punctuation z-section z-block z-end z-perl">}</span>
</span><span class="z-source z-perl">  <span class="z-meta z-function-call z-perl"><span class="z-support z-function z-perl">close</span></span> <span class="z-meta z-function-call z-perl"><span class="z-variable z-function z-perl">A</span></span><span class="z-punctuation z-terminator z-statement z-perl">;</span>
</span><span class="z-source z-perl"><span class="z-punctuation z-section z-block z-end z-perl">}</span>
</span><span class="z-source z-perl">
</span><span class="z-source z-perl"><span class="z-meta z-preprocessor z-use z-perl"><span class="z-keyword z-control z-import z-use z-perl">use</span> <span class="z-meta z-path z-perl"><span class="z-entity z-name z-namespace z-perl">Data</span><span class="z-punctuation z-accessor z-double-colon z-perl">::</span><span class="z-entity z-name z-namespace z-perl">Dumper</span></span></span><span class="z-punctuation z-terminator z-statement z-perl">;</span>
</span><span class="z-source z-perl"><span class="z-meta z-function-call z-perl"><span class="z-support z-function z-perl">print</span></span> <span class="z-meta z-function-call z-perl"><span class="z-variable z-function z-perl">Dumper</span></span><span class="z-punctuation z-section z-group z-begin z-perl">(</span><span class="z-keyword z-operator z-reference z-perl">\</span><span class="z-variable z-other z-readwrite z-perl"><span class="z-punctuation z-definition z-variable z-perl">%</span>sensors</span><span class="z-punctuation z-section z-group z-end z-perl">)</span><span class="z-keyword z-operator z-concat z-perl">.</span><span class="z-meta z-string z-perl"><span class="z-string z-quoted z-double z-perl"><span class="z-punctuation z-definition z-string z-begin z-perl">"</span><span class="z-constant z-character z-escape z-perl">\n</span><span class="z-punctuation z-definition z-string z-end z-perl">"</span></span></span> <span class="z-keyword z-control z-conditional z-if z-perl">if</span> <span class="z-variable z-other z-readwrite z-perl"><span class="z-punctuation z-definition z-variable z-perl">$</span>debug</span><span class="z-punctuation z-terminator z-statement z-perl">;</span>
</span><span class="z-source z-perl"><span class="z-meta z-function-call z-perl"><span class="z-support z-function z-perl">print</span></span> <span class="z-meta z-function-call z-perl"><span class="z-variable z-function z-perl">Dumper</span></span><span class="z-punctuation z-section z-group z-begin z-perl">(</span><span class="z-keyword z-operator z-reference z-perl">\</span><span class="z-variable z-other z-readwrite z-perl"><span class="z-punctuation z-definition z-variable z-perl">%</span>labels</span><span class="z-punctuation z-section z-group z-end z-perl">)</span><span class="z-keyword z-operator z-concat z-perl">.</span><span class="z-meta z-string z-perl"><span class="z-string z-quoted z-double z-perl"><span class="z-punctuation z-definition z-string z-begin z-perl">"</span><span class="z-constant z-character z-escape z-perl">\n</span><span class="z-punctuation z-definition z-string z-end z-perl">"</span></span></span> <span class="z-keyword z-control z-conditional z-if z-perl">if</span> <span class="z-variable z-other z-readwrite z-perl"><span class="z-punctuation z-definition z-variable z-perl">$</span>debug</span><span class="z-punctuation z-terminator z-statement z-perl">;</span>
</span><span class="z-source z-perl">
</span><span class="z-source z-perl"><span class="z-keyword z-control z-conditional z-if z-perl">if</span> <span class="z-punctuation z-section z-group z-begin z-perl">(</span><span class="z-meta z-function-call z-perl"><span class="z-support z-function z-perl">defined</span></span> <span class="z-variable z-language z-perl"><span class="z-punctuation z-definition z-variable z-perl">$</span>ARGV</span><span class="z-meta z-item-access z-perl"><span class="z-punctuation z-section z-item-access z-begin z-perl">[</span><span class="z-constant z-numeric z-integer z-decimal z-perl">0</span><span class="z-punctuation z-section z-item-access z-end z-perl">]</span></span><span class="z-punctuation z-section z-group z-end z-perl">)</span> <span class="z-punctuation z-section z-block z-begin z-perl">{</span>
</span><span class="z-source z-perl">  <span class="z-keyword z-control z-conditional z-if z-perl">if</span> <span class="z-punctuation z-section z-group z-begin z-perl">(</span><span class="z-variable z-language z-perl"><span class="z-punctuation z-definition z-variable z-perl">$</span>ARGV</span><span class="z-meta z-item-access z-perl"><span class="z-punctuation z-section z-item-access z-begin z-perl">[</span><span class="z-constant z-numeric z-integer z-decimal z-perl">0</span><span class="z-punctuation z-section z-item-access z-end z-perl">]</span></span> <span class="z-keyword z-operator z-logical z-perl">eq</span> <span class="z-meta z-string z-perl"><span class="z-string z-quoted z-single z-perl"><span class="z-punctuation z-definition z-string z-begin z-perl">'</span>autoconf<span class="z-punctuation z-definition z-string z-end z-perl">'</span></span></span><span class="z-punctuation z-section z-group z-end z-perl">)</span> <span class="z-punctuation z-section z-block z-begin z-perl">{</span>
</span><span class="z-source z-perl">    <span class="z-keyword z-control z-conditional z-if z-perl">if</span> <span class="z-punctuation z-section z-group z-begin z-perl">(</span><span class="z-keyword z-operator z-filetest z-perl">-d</span> <span class="z-meta z-string z-perl"><span class="z-string z-quoted z-double z-perl"><span class="z-punctuation z-definition z-string z-begin z-perl">"</span>/mnt/1wire/bus.0<span class="z-punctuation z-definition z-string z-end z-perl">"</span></span></span><span class="z-punctuation z-section z-group z-end z-perl">)</span> <span class="z-punctuation z-section z-block z-begin z-perl">{</span>
</span><span class="z-source z-perl">      <span class="z-meta z-function-call z-perl"><span class="z-support z-function z-perl">print</span></span> <span class="z-meta z-string z-perl"><span class="z-string z-quoted z-double z-perl"><span class="z-punctuation z-definition z-string z-begin z-perl">"</span>yes<span class="z-constant z-character z-escape z-perl">\n</span><span class="z-punctuation z-definition z-string z-end z-perl">"</span></span></span><span class="z-punctuation z-terminator z-statement z-perl">;</span>
</span><span class="z-source z-perl">      <span class="z-keyword z-control z-flow z-exit z-perl">exit</span> <span class="z-constant z-numeric z-integer z-decimal z-perl">0</span><span class="z-punctuation z-terminator z-statement z-perl">;</span>
</span><span class="z-source z-perl">    <span class="z-punctuation z-section z-block z-end z-perl">}</span>
</span><span class="z-source z-perl">    <span class="z-meta z-function-call z-perl"><span class="z-support z-function z-perl">print</span></span> <span class="z-meta z-string z-perl"><span class="z-string z-quoted z-double z-perl"><span class="z-punctuation z-definition z-string z-begin z-perl">"</span>no<span class="z-constant z-character z-escape z-perl">\n</span><span class="z-punctuation z-definition z-string z-end z-perl">"</span></span></span><span class="z-punctuation z-terminator z-statement z-perl">;</span>
</span><span class="z-source z-perl">    <span class="z-keyword z-control z-flow z-exit z-perl">exit</span> <span class="z-constant z-numeric z-integer z-decimal z-perl">1</span><span class="z-punctuation z-terminator z-statement z-perl">;</span>
</span><span class="z-source z-perl">  <span class="z-punctuation z-section z-block z-end z-perl">}</span> <span class="z-keyword z-control z-conditional z-elseif z-perl">elsif</span> <span class="z-punctuation z-section z-group z-begin z-perl">(</span><span class="z-variable z-language z-perl"><span class="z-punctuation z-definition z-variable z-perl">$</span>ARGV</span><span class="z-meta z-item-access z-perl"><span class="z-punctuation z-section z-item-access z-begin z-perl">[</span><span class="z-constant z-numeric z-integer z-decimal z-perl">0</span><span class="z-punctuation z-section z-item-access z-end z-perl">]</span></span> <span class="z-keyword z-operator z-logical z-perl">eq</span> <span class="z-meta z-string z-perl"><span class="z-string z-quoted z-single z-perl"><span class="z-punctuation z-definition z-string z-begin z-perl">'</span>config<span class="z-punctuation z-definition z-string z-end z-perl">'</span></span></span><span class="z-punctuation z-section z-group z-end z-perl">)</span> <span class="z-punctuation z-section z-block z-begin z-perl">{</span>
</span><span class="z-source z-perl">    <span class="z-meta z-function-call z-perl"><span class="z-support z-function z-perl">print</span></span> <span class="z-meta z-string z-perl"><span class="z-string z-quoted z-double z-perl"><span class="z-punctuation z-definition z-string z-begin z-perl">"</span>graph_title Temperature<span class="z-constant z-character z-escape z-perl">\n</span><span class="z-punctuation z-definition z-string z-end z-perl">"</span></span></span><span class="z-punctuation z-terminator z-statement z-perl">;</span>
</span><span class="z-source z-perl">    <span class="z-meta z-function-call z-perl"><span class="z-support z-function z-perl">print</span></span> <span class="z-meta z-string z-perl"><span class="z-string z-quoted z-double z-perl"><span class="z-punctuation z-definition z-string z-begin z-perl">"</span>graph_args --base 1000<span class="z-constant z-character z-escape z-perl">\n</span><span class="z-punctuation z-definition z-string z-end z-perl">"</span></span></span><span class="z-punctuation z-terminator z-statement z-perl">;</span>
</span><span class="z-source z-perl">    <span class="z-meta z-function-call z-perl"><span class="z-support z-function z-perl">print</span></span> <span class="z-meta z-string z-perl"><span class="z-string z-quoted z-double z-perl"><span class="z-punctuation z-definition z-string z-begin z-perl">"</span>graph_vlabel Temp in °C<span class="z-constant z-character z-escape z-perl">\n</span><span class="z-punctuation z-definition z-string z-end z-perl">"</span></span></span><span class="z-punctuation z-terminator z-statement z-perl">;</span>
</span><span class="z-source z-perl">    <span class="z-meta z-function-call z-perl"><span class="z-support z-function z-perl">print</span></span> <span class="z-meta z-string z-perl"><span class="z-string z-quoted z-double z-perl"><span class="z-punctuation z-definition z-string z-begin z-perl">"</span>graph_category sensors<span class="z-constant z-character z-escape z-perl">\n</span><span class="z-punctuation z-definition z-string z-end z-perl">"</span></span></span><span class="z-punctuation z-terminator z-statement z-perl">;</span>
</span><span class="z-source z-perl">    <span class="z-meta z-function-call z-perl"><span class="z-support z-function z-perl">print</span></span> <span class="z-meta z-string z-perl"><span class="z-string z-quoted z-double z-perl"><span class="z-punctuation z-definition z-string z-begin z-perl">"</span>graph_info This graph shows the temperature in degrees Celsius of the sensors on the network.<span class="z-constant z-character z-escape z-perl">\n</span><span class="z-punctuation z-definition z-string z-end z-perl">"</span></span></span><span class="z-punctuation z-terminator z-statement z-perl">;</span>
</span><span class="z-source z-perl">    <span class="z-meta z-function-call z-perl"><span class="z-support z-function z-perl">print</span></span> <span class="z-meta z-string z-perl"><span class="z-string z-quoted z-double z-perl"><span class="z-punctuation z-definition z-string z-begin z-perl">"</span></span><span class="z-meta z-interpolation z-perl"><span class="z-variable z-other z-readwrite z-perl"><span class="z-punctuation z-definition z-variable z-perl">$</span>sensor_names</span><span class="z-meta z-item-access z-perl"><span class="z-punctuation z-section z-item-access z-begin z-perl">{</span><span class="z-variable z-language z-perl"><span class="z-punctuation z-definition z-variable z-perl">$</span>_</span><span class="z-punctuation z-section z-item-access z-end z-perl">}</span></span></span><span class="z-string z-quoted z-double z-perl">.label </span><span class="z-meta z-interpolation z-perl"><span class="z-variable z-other z-readwrite z-perl"><span class="z-punctuation z-definition z-variable z-perl">$</span>labels</span><span class="z-meta z-item-access z-perl"><span class="z-punctuation z-section z-item-access z-begin z-perl">{</span><span class="z-variable z-language z-perl"><span class="z-punctuation z-definition z-variable z-perl">$</span>_</span><span class="z-punctuation z-section z-item-access z-end z-perl">}</span></span></span><span class="z-string z-quoted z-double z-perl"><span class="z-constant z-character z-escape z-perl">\n</span><span class="z-punctuation z-definition z-string z-end z-perl">"</span></span></span> <span class="z-keyword z-control z-loop z-foreach z-perl">foreach</span> <span class="z-punctuation z-section z-group z-begin z-perl">(</span><span class="z-meta z-function-call z-perl"><span class="z-support z-function z-perl">keys</span></span> <span class="z-variable z-other z-readwrite z-perl"><span class="z-punctuation z-definition z-variable z-perl">%</span>sensors</span><span class="z-punctuation z-section z-group z-end z-perl">)</span><span class="z-punctuation z-terminator z-statement z-perl">;</span>
</span><span class="z-source z-perl">    <span class="z-keyword z-control z-flow z-exit z-perl">exit</span> <span class="z-constant z-numeric z-integer z-decimal z-perl">0</span><span class="z-punctuation z-terminator z-statement z-perl">;</span>
</span><span class="z-source z-perl">  <span class="z-punctuation z-section z-block z-end z-perl">}</span>
</span><span class="z-source z-perl"><span class="z-punctuation z-section z-block z-end z-perl">}</span>
</span><span class="z-source z-perl">
</span><span class="z-source z-perl"><span class="z-keyword z-control z-loop z-for z-perl">for</span> <span class="z-storage z-type z-variable z-perl">my</span> <span class="z-variable z-other z-readwrite z-perl"><span class="z-punctuation z-definition z-variable z-perl">$</span>sensor</span> <span class="z-punctuation z-section z-group z-begin z-perl">(</span><span class="z-meta z-function-call z-perl"><span class="z-support z-function z-perl">keys</span></span> <span class="z-variable z-other z-readwrite z-perl"><span class="z-punctuation z-definition z-variable z-perl">%</span>sensors</span><span class="z-punctuation z-section z-group z-end z-perl">)</span> <span class="z-punctuation z-section z-block z-begin z-perl">{</span>
</span><span class="z-source z-perl">  <span class="z-meta z-function-call z-perl"><span class="z-support z-function z-perl">print</span></span> <span class="z-meta z-string z-perl"><span class="z-string z-quoted z-double z-perl"><span class="z-punctuation z-definition z-string z-begin z-perl">"</span>sensor is </span><span class="z-meta z-interpolation z-perl"><span class="z-variable z-other z-readwrite z-perl"><span class="z-punctuation z-definition z-variable z-perl">$</span>sensor</span></span><span class="z-string z-quoted z-double z-perl"><span class="z-constant z-character z-escape z-perl">\n</span><span class="z-punctuation z-definition z-string z-end z-perl">"</span></span></span> <span class="z-keyword z-control z-conditional z-if z-perl">if</span> <span class="z-variable z-other z-readwrite z-perl"><span class="z-punctuation z-definition z-variable z-perl">$</span>debug</span><span class="z-punctuation z-terminator z-statement z-perl">;</span>
</span><span class="z-source z-perl">  <span class="z-keyword z-control z-conditional z-if z-perl">if</span> <span class="z-punctuation z-section z-group z-begin z-perl">(</span><span class="z-variable z-language z-perl"><span class="z-punctuation z-definition z-variable z-perl">$</span>0</span> <span class="z-keyword z-operator z-binary z-perl">=~</span> <span class="z-punctuation z-section z-generic z-begin z-perl">/</span><span class="z-meta z-string z-perl"><span class="z-string z-regexp z-perl"><span class="z-source z-regexp"><span class="z-meta z-literal z-regexp">o</span><span class="z-meta z-literal z-regexp">w</span><span class="z-meta z-literal z-regexp">_</span><span class="z-meta z-group z-regexp"><span class="z-keyword z-control z-group z-regexp">(</span></span><span class="z-meta z-group z-regexp"><span class="z-meta z-set z-regexp"><span class="z-keyword z-control z-set z-regexp">[</span><span class="z-keyword z-control z-character-class z-regexp">\w</span><span class="z-constant z-character z-escape z-regexp">\.</span><span class="z-keyword z-control z-set z-regexp">]</span></span><span class="z-keyword z-operator z-quantifier z-regexp">+</span></span><span class="z-meta z-group z-regexp"><span class="z-keyword z-control z-group z-regexp">)</span></span></span></span></span><span class="z-punctuation z-section z-generic z-end z-perl">/</span><span class="z-punctuation z-section z-group z-end z-perl">)</span> <span class="z-punctuation z-section z-block z-begin z-perl">{</span>
</span><span class="z-source z-perl">    <span class="z-meta z-function-call z-perl"><span class="z-support z-function z-perl">print</span></span> <span class="z-meta z-string z-perl"><span class="z-string z-quoted z-double z-perl"><span class="z-punctuation z-definition z-string z-begin z-perl">"</span>1 is </span><span class="z-meta z-interpolation z-perl"><span class="z-variable z-language z-regexp z-match-group z-perl"><span class="z-punctuation z-definition z-variable z-perl">$</span>1</span></span><span class="z-string z-quoted z-double z-perl"><span class="z-constant z-character z-escape z-perl">\n</span><span class="z-punctuation z-definition z-string z-end z-perl">"</span></span></span> <span class="z-keyword z-control z-conditional z-if z-perl">if</span> <span class="z-variable z-other z-readwrite z-perl"><span class="z-punctuation z-definition z-variable z-perl">$</span>debug</span><span class="z-punctuation z-terminator z-statement z-perl">;</span>
</span><span class="z-source z-perl">    <span class="z-keyword z-control z-flow z-next z-perl">next</span> <span class="z-keyword z-control z-conditional z-unless z-perl">unless</span> <span class="z-punctuation z-section z-group z-begin z-perl">(</span><span class="z-variable z-language z-regexp z-match-group z-perl"><span class="z-punctuation z-definition z-variable z-perl">$</span>1</span> <span class="z-keyword z-operator z-logical z-perl">eq</span> <span class="z-variable z-other z-readwrite z-perl"><span class="z-punctuation z-definition z-variable z-perl">$</span>sensor</span> <span class="z-keyword z-operator z-logical z-perl">||</span> <span class="z-variable z-language z-regexp z-match-group z-perl"><span class="z-punctuation z-definition z-variable z-perl">$</span>1</span> <span class="z-keyword z-operator z-logical z-perl">eq</span> <span class="z-variable z-other z-readwrite z-perl"><span class="z-punctuation z-definition z-variable z-perl">$</span>labels</span><span class="z-meta z-item-access z-perl"><span class="z-punctuation z-section z-item-access z-begin z-perl">{</span><span class="z-variable z-other z-readwrite z-perl"><span class="z-punctuation z-definition z-variable z-perl">$</span>sensor</span><span class="z-punctuation z-section z-item-access z-end z-perl">}</span></span><span class="z-punctuation z-section z-group z-end z-perl">)</span><span class="z-punctuation z-terminator z-statement z-perl">;</span>
</span><span class="z-source z-perl">  <span class="z-punctuation z-section z-block z-end z-perl">}</span>
</span><span class="z-source z-perl">  <span class="z-storage z-type z-variable z-perl">my</span> <span class="z-variable z-other z-readwrite z-perl"><span class="z-punctuation z-definition z-variable z-perl">$</span>file</span> <span class="z-keyword z-operator z-assignment z-perl">=</span> <span class="z-meta z-string z-perl"><span class="z-string z-quoted z-double z-perl"><span class="z-punctuation z-definition z-string z-begin z-perl">"</span>/mnt/1wire/bus.0/<span class="z-punctuation z-definition z-string z-end z-perl">"</span></span></span><span class="z-keyword z-operator z-concat z-perl">.</span><span class="z-variable z-other z-readwrite z-perl"><span class="z-punctuation z-definition z-variable z-perl">$</span>sensors</span><span class="z-meta z-item-access z-perl"><span class="z-punctuation z-section z-item-access z-begin z-perl">{</span><span class="z-variable z-other z-readwrite z-perl"><span class="z-punctuation z-definition z-variable z-perl">$</span>sensor</span><span class="z-punctuation z-section z-item-access z-end z-perl">}</span></span><span class="z-keyword z-operator z-concat z-perl">.</span><span class="z-meta z-string z-perl"><span class="z-string z-quoted z-double z-perl"><span class="z-punctuation z-definition z-string z-begin z-perl">"</span>/temperature<span class="z-punctuation z-definition z-string z-end z-perl">"</span></span></span><span class="z-punctuation z-terminator z-statement z-perl">;</span>
</span><span class="z-source z-perl">  <span class="z-storage z-type z-variable z-perl">my</span> <span class="z-variable z-other z-readwrite z-perl"><span class="z-punctuation z-definition z-variable z-perl">$</span>temp</span> <span class="z-keyword z-operator z-assignment z-perl">=</span> <span class="z-meta z-string z-perl"><span class="z-string z-quoted z-backtick z-perl"><span class="z-punctuation z-definition z-string z-begin z-perl">`</span>cat </span><span class="z-meta z-interpolation z-perl"><span class="z-variable z-other z-readwrite z-perl"><span class="z-punctuation z-definition z-variable z-perl">$</span>file</span></span><span class="z-string z-quoted z-backtick z-perl"><span class="z-punctuation z-definition z-string z-end z-perl">`</span></span></span><span class="z-punctuation z-terminator z-statement z-perl">;</span>
</span><span class="z-source z-perl">  <span class="z-meta z-function-call z-perl"><span class="z-support z-function z-perl">chomp</span></span> <span class="z-variable z-other z-readwrite z-perl"><span class="z-punctuation z-definition z-variable z-perl">$</span>temp</span><span class="z-punctuation z-terminator z-statement z-perl">;</span>
</span><span class="z-source z-perl">  <span class="z-meta z-function-call z-perl"><span class="z-support z-function z-perl">printf</span></span> <span class="z-meta z-string z-perl"><span class="z-string z-quoted z-double z-perl"><span class="z-punctuation z-definition z-string z-begin z-perl">"</span><span class="z-constant z-other z-placeholder z-perl"><span class="z-punctuation z-definition z-placeholder z-perl">%</span>s</span>.value <span class="z-constant z-other z-placeholder z-perl"><span class="z-punctuation z-definition z-placeholder z-perl">%</span><span class="z-punctuation z-separator z-decimal z-perl">.</span>4f</span><span class="z-constant z-character z-escape z-perl">\n</span><span class="z-punctuation z-definition z-string z-end z-perl">"</span></span></span><span class="z-punctuation z-separator z-sequence z-perl">,</span> <span class="z-variable z-other z-readwrite z-perl"><span class="z-punctuation z-definition z-variable z-perl">$</span>sensor_names</span><span class="z-meta z-item-access z-perl"><span class="z-punctuation z-section z-item-access z-begin z-perl">{</span><span class="z-variable z-other z-readwrite z-perl"><span class="z-punctuation z-definition z-variable z-perl">$</span>sensor</span><span class="z-punctuation z-section z-item-access z-end z-perl">}</span></span><span class="z-punctuation z-separator z-sequence z-perl">,</span> <span class="z-variable z-other z-readwrite z-perl"><span class="z-punctuation z-definition z-variable z-perl">$</span>temp</span><span class="z-punctuation z-terminator z-statement z-perl">;</span>
</span><span class="z-source z-perl"><span class="z-punctuation z-section z-block z-end z-perl">}</span>
</span><span class="z-source z-perl">
</span><span class="z-source z-perl"><span class="z-keyword z-control z-flow z-exit z-perl">exit</span> <span class="z-constant z-numeric z-integer z-decimal z-perl">0</span><span class="z-punctuation z-terminator z-statement z-perl">;</span>
</span></code></pre><p>Next up, the aliases file <code>/etc/owfs-aliases</code> - again, it was late, owfs aliases didn’t appear to be working quite how I was expecting, and so I hacked the plugin to use this file:<pre class=z-code><code><span class="z-text z-plain">28.5086C4030000 = Front_Bedroom
</span><span class="z-text z-plain">28.7D61C4030000 = Garage
</span><span class="z-text z-plain">28.684EC4030000 = Garage_Outside
</span><span class="z-text z-plain">28.873AC4030000 = Loft
</span><span class="z-text z-plain">28.C786C4030000 = Small_Bedroom
</span></code></pre></article><hr><nav id=post-nav><a class="post-nav-item post-nav-prev" href=https://karldyson.github.io/karld-blog-website/posts/ipv6-privacy-extensions/> <div class=nav-arrow>Previous</div> <span class=post-title>IPv6 Privacy Extensions</span> </a><a class="post-nav-item post-nav-next" href=https://karldyson.github.io/karld-blog-website/posts/current-cost/> <div class=nav-arrow>Next</div> <span class=post-title>CurrentCost Electricity Monitoring</span> </a></nav><span class=hidden id=search-index>https://karldyson.github.io/karld-blog-website/search_index.en.json</span><span class=hidden id=more-matches-text>$MATCHES more matches</span></main><footer id=site-footer><nav><ul><li><a href=https://karldyson.github.io/karld-blog-website/about/>About</a><li><a href=https://karldyson.github.io/karld-blog-website/posts/>Posts</a><li><a href=https://karldyson.github.io/karld-blog-website/archive/>Archive</a><li><a href=https://karldyson.github.io/karld-blog-website/latest-posts/>Latest Posts</a></ul></nav><p>© Karl Dyson, 2010-2026. All rights reserved.<ul id=socials><li><a rel=" me" href=https://github.com/karldyson/ title=GitHub> <i style="--icon:url(&#34;data:image/svg+xml,%3Csvg role='img' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Ctitle%3EGitHub%3C/title%3E%3Cpath d='M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12'/%3E%3C/svg%3E&#34;)" class=icon></i> <span>GitHub</span> </a><li><a rel=" me" href=https://instagram.com/karlddyson/ title=Instagram> <i style="--icon:url(&#34;data:image/svg+xml,%3Csvg role='img' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Ctitle%3EInstagram%3C/title%3E%3Cpath d='M7.0301.084c-1.2768.0602-2.1487.264-2.911.5634-.7888.3075-1.4575.72-2.1228 1.3877-.6652.6677-1.075 1.3368-1.3802 2.127-.2954.7638-.4956 1.6365-.552 2.914-.0564 1.2775-.0689 1.6882-.0626 4.947.0062 3.2586.0206 3.6671.0825 4.9473.061 1.2765.264 2.1482.5635 2.9107.308.7889.72 1.4573 1.388 2.1228.6679.6655 1.3365 1.0743 2.1285 1.38.7632.295 1.6361.4961 2.9134.552 1.2773.056 1.6884.069 4.9462.0627 3.2578-.0062 3.668-.0207 4.9478-.0814 1.28-.0607 2.147-.2652 2.9098-.5633.7889-.3086 1.4578-.72 2.1228-1.3881.665-.6682 1.0745-1.3378 1.3795-2.1284.2957-.7632.4966-1.636.552-2.9124.056-1.2809.0692-1.6898.063-4.948-.0063-3.2583-.021-3.6668-.0817-4.9465-.0607-1.2797-.264-2.1487-.5633-2.9117-.3084-.7889-.72-1.4568-1.3876-2.1228C21.2982 1.33 20.628.9208 19.8378.6165 19.074.321 18.2017.1197 16.9244.0645 15.6471.0093 15.236-.005 11.977.0014 8.718.0076 8.31.0215 7.0301.0839m.1402 21.6932c-1.17-.0509-1.8053-.2453-2.2287-.408-.5606-.216-.96-.4771-1.3819-.895-.422-.4178-.6811-.8186-.9-1.378-.1644-.4234-.3624-1.058-.4171-2.228-.0595-1.2645-.072-1.6442-.079-4.848-.007-3.2037.0053-3.583.0607-4.848.05-1.169.2456-1.805.408-2.2282.216-.5613.4762-.96.895-1.3816.4188-.4217.8184-.6814 1.3783-.9003.423-.1651 1.0575-.3614 2.227-.4171 1.2655-.06 1.6447-.072 4.848-.079 3.2033-.007 3.5835.005 4.8495.0608 1.169.0508 1.8053.2445 2.228.408.5608.216.96.4754 1.3816.895.4217.4194.6816.8176.9005 1.3787.1653.4217.3617 1.056.4169 2.2263.0602 1.2655.0739 1.645.0796 4.848.0058 3.203-.0055 3.5834-.061 4.848-.051 1.17-.245 1.8055-.408 2.2294-.216.5604-.4763.96-.8954 1.3814-.419.4215-.8181.6811-1.3783.9-.4224.1649-1.0577.3617-2.2262.4174-1.2656.0595-1.6448.072-4.8493.079-3.2045.007-3.5825-.006-4.848-.0608M16.953 5.5864A1.44 1.44 0 1 0 18.39 4.144a1.44 1.44 0 0 0-1.437 1.4424M5.8385 12.012c.0067 3.4032 2.7706 6.1557 6.173 6.1493 3.4026-.0065 6.157-2.7701 6.1506-6.1733-.0065-3.4032-2.771-6.1565-6.174-6.1498-3.403.0067-6.156 2.771-6.1496 6.1738M8 12.0077a4 4 0 1 1 4.008 3.9921A3.9996 3.9996 0 0 1 8 12.0077'/%3E%3C/svg%3E&#34;)" class=icon></i> <span>Instagram</span> </a><li><a rel=" me" href=https://mastodon.social title=Mastodon> <i style="--icon:url(&#34;data:image/svg+xml,%3Csvg role='img' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Ctitle%3EMastodon%3C/title%3E%3Cpath d='M23.268 5.313c-.35-2.578-2.617-4.61-5.304-5.004C17.51.242 15.792 0 11.813 0h-.03c-3.98 0-4.835.242-5.288.309C3.882.692 1.496 2.518.917 5.127.64 6.412.61 7.837.661 9.143c.074 1.874.088 3.745.26 5.611.118 1.24.325 2.47.62 3.68.55 2.237 2.777 4.098 4.96 4.857 2.336.792 4.849.923 7.256.38.265-.061.527-.132.786-.213.585-.184 1.27-.39 1.774-.753a.057.057 0 0 0 .023-.043v-1.809a.052.052 0 0 0-.02-.041.053.053 0 0 0-.046-.01 20.282 20.282 0 0 1-4.709.545c-2.73 0-3.463-1.284-3.674-1.818a5.593 5.593 0 0 1-.319-1.433.053.053 0 0 1 .066-.054c1.517.363 3.072.546 4.632.546.376 0 .75 0 1.125-.01 1.57-.044 3.224-.124 4.768-.422.038-.008.077-.015.11-.024 2.435-.464 4.753-1.92 4.989-5.604.008-.145.03-1.52.03-1.67.002-.512.167-3.63-.024-5.545zm-3.748 9.195h-2.561V8.29c0-1.309-.55-1.976-1.67-1.976-1.23 0-1.846.79-1.846 2.35v3.403h-2.546V8.663c0-1.56-.617-2.35-1.848-2.35-1.112 0-1.668.668-1.67 1.977v6.218H4.822V8.102c0-1.31.337-2.35 1.011-3.12.696-.77 1.608-1.164 2.74-1.164 1.311 0 2.302.5 2.962 1.498l.638 1.06.638-1.06c.66-.999 1.65-1.498 2.96-1.498 1.13 0 2.043.395 2.74 1.164.675.77 1.012 1.81 1.012 3.12z'/%3E%3C/svg%3E&#34;)" class=icon></i> <span>Mastodon</span> </a></ul></footer>